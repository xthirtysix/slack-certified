---
order: 3
---

â¤´ï¸ [[ðŸ’¬ Slack]]
ðŸ·ï¸ #slack/development 

# Design for Security. Workshop 4
___
> [!info] ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ðº Ð¿Ñ€Ð¾Ñ‡Ñ‚ÐµÐ½Ð¸ÑŽ
> - ðŸ”— [Basic app setup | Slack](https://api.slack.com/authentication/basics#scopes)
> - ðŸ”— [Slack Certified Developer Prep Course](https://www.slackcertified.com/certified-developer-prep-course/932655/scorm/8i3ugo85wizl)
> - ðŸ”— [Installing with OAuth | Slack](https://api.slack.com/authentication/oauth-v2)
> - ðŸ”— [Access tokens | Slack](https://api.slack.com/authentication/token-types)
> - ðŸ”— [Permission scopes | Slack](https://api.slack.com/scopes)
> - ðŸ”— [Verifying requests from Slack | Slack](https://api.slack.com/authentication/verifying-requests-from-slack)

## Ð’Ð¸Ð´Ñ‹ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²
Ð¢Ð¾ÐºÐµÐ½ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð±Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð´Ð°Ð½Ð½Ñ‹Ð¼ (Ðº ÐºÐ°ÐºÐ¸Ð¼ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ð¼ - Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚ÑÑ token scope'Ð°Ð¼Ð¸).
Ð¡ÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð²Ð¸Ð´Ð¾Ð² Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð², Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ð¾Ð³Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»Ð° Ð¸ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ scopes ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹ Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾ Ð¸Ð»Ð¸ Ð¸Ð½Ð¾Ð³Ð¾ Ñ‚Ð¾ÐºÐµÐ½Ð°.

| Ð’Ð¸Ð´ Ñ‚Ð¾ÐºÐµÐ½Ð°      | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                                                                                                                                                                                                                                                                                   |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Bot token       | ÐŸÐ¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹, Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ñ‡Ð½Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»ÑŒÑŽ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚Ðµ scopes, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½ÑƒÐ¶Ð½Ñ‹. Ð’ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð¸Ð¸ Ð¾Ñ‚ **User token** Ð½Ðµ Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ñ‹ Ðº Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð’ÑÐµÐ³Ð´Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‚ÑÑ Ñ `xoxb-`                                                                  |
| User token      | Ð­Ñ‚Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‚ Ð²Ð°Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹, ÐºÐ¾Ð³Ð´Ð° ÑÑ‚Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾. Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¼Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ð°Ð¼Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ ÐºÐ°Ðº Ð±Ñ‹ ÑÐ°Ð¼Ð¸Ð¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼. Ð¢Ð¾ÐºÐµÐ½Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð²ÑÐµÐ³Ð´Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‚ÑÑ Ñ `xoxp-`                                                              |
| App-level token | Ð­Ñ‚Ð¾ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ Ñ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¼Ð¸ API, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¾Ñ‚Ð½Ð¾ÑÑÑ‚ÑÑ Ðº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑŽ Ð²Ð¾ Ð²ÑÐµÑ… Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸ÑÑ…, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð¾Ð½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾. Ð­Ñ‚Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð´Ð°ÑŽÑ‚ Ð²Ð°Ð¼ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ð²ÐµÑ‰Ð¸, Ð¾Ñ‚Ð½Ð¾ÑÑÑ‰Ð¸ÐµÑÑ Ðº Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑŽ Ð² Ñ†ÐµÐ»Ð¾Ð¼. Ð¢Ð¾ÐºÐµÐ½Ñ‹ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð²ÑÐµÐ³Ð´Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‚ÑÑ Ñ `xapp-` |
| Configuration token                | Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð´Ð»Ñ workspace, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ðµ Ñ Manifest App APIs Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Slack.                                                                                                                                                                                                                                                                                            |

## Scopes
Ð¡ÐºÐ¾ÑƒÐ¿Ñ‹ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÑŽÑ‚ Ð½Ð°Ð±Ð¾Ñ€ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð¾Ð² Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ. Ð’ÑÐµÐ³Ð´Ð° Ð²Ñ‹Ð±Ð¸Ñ€Ð°Ð¹Ñ‚Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ð¹ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼. ÐœÐ¾Ð¶Ð½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°Ñ‚ÑŒ Ð¸Ð· Ð²ÐºÐ»Ð°Ð´ÐºÐ¸ **OAuth & Permissions** Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.
[Ð¡ÐºÐ¾ÑƒÐ¿Ñ‹ Slack Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ](https://api.slack.com/scopes)

## Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ€Ð°Ð·, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ¾Ð³Ð»Ð°ÑˆÐ°ÐµÑ‚ÑÑ ÑÐ¾ ÑÐºÐ¾ÑƒÐ¿Ð°Ð¼Ð¸ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¸ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ð°ÐµÑ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ, Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°. ==Ð˜Ð½Ñ‹Ð¼Ð¸ ÑÐ»Ð¾Ð²Ð°Ð¼Ð¸, ÐºÐ°Ð¶Ð´Ñ‹Ð¹ access token, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚Ðµ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð±Ð¾Ð¹ Ð¸Ð½ÑÑ‚Ð°Ð½Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Slack Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ==.

ÐŸÑ€Ð¸ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ 1 Ð¸Ð· 2 ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð² ÐµÐ³Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸:
1. Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
2. OAuth flow

### Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
- Ð’Ñ‹Ð±ÐµÑ€ÐµÑ‚Ðµ ÑÐºÐ¾ÑƒÐ¿Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½ÑƒÐ¶Ð½Ñ‹ Ð±Ð¾Ñ‚-Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ.
- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° single workspace
- ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ bot token Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð½Ð° Ð²ÐºÐ»Ð°Ð´ÐºÐµ **OAuth & Permissions**

### OAuth flow
Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð½Ð° Ð±Ð¾Ð»ÐµÐµ Ñ‡ÐµÐ¼ Ð¾Ð´Ð¸Ð½ workspace.
- OAuth Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Slack Workspace ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
- Ð’ ÐºÐ¾Ð½Ñ†Ðµ OAuth flow Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ access token. Ð­Ñ‚Ð¾Ñ‚ Ñ‚Ð¾ÐºÐµÐ½ Ð¾Ñ‚ÐºÑ€Ð¾ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Slack API Ð¼ÐµÑ‚Ð¾Ð´Ð°Ð¼, events Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ñ„Ð¸Ñ‡Ð°Ð¼
- Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ OAuth flow Ð²Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÐ¸Ðµ ÑÐºÐ¾ÑƒÐ¿Ñ‹ Ð½ÑƒÐ¶Ð½Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑŽ

Ð’Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ acess token Ð² 3 ÑˆÐ°Ð³Ð°:
1. Ð—Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ ÑÐºÐ¾ÑƒÐ¿Ñ‹
2. ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑˆÐµÐ½Ð½Ñ‹Ðµ ÑÐºÐ¾ÑƒÐ¿Ñ‹
3. ÐžÐ±Ð¼ÐµÐ½Ð¸Ð²Ð°ÐµÑ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ Ð½Ð° access token

#### Ð—Ð°Ð¿Ñ€Ð¾Ñ ÑÐºÐ¾ÑƒÐ¿Ð¾Ð²
Ð§Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑÐºÐ¾ÑƒÐ¿Ñ‹ Ð¿ÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½Ð° `https://slack.com/oauth/v2/authorize`, Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² ÐºÐ°Ñ‡-Ð²Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð² ClientId Ð¸ ÑÐºÐ¾ÑƒÐ¿Ñ‹ Ð² Ð²Ð¸Ð´Ðµ  `scope=incoming-webhook,command`. ÐšÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ ÑÑÑ‹Ð»ÐºÐ° Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ Ñ‚Ð°Ðº:
```ruby
https://slack.com/oauth/v2/authorize?scope=incoming-webhook,commands&client_id=3336676.569200954261
```
ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ `scope` Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° ÑÐºÐ¾ÑƒÐ¿Ñ‹ bot-user'Ð°. Ð•ÑÐ»Ð¸ Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ñ‹ user scopes Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ ÑÑ‚Ð¾Ñ‚ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ (Ð¸Ð»Ð¸ Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹) Ð½Ð° `user_scope`.

>[!warning] Progressive permissions
>ÐœÐ¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ ÑÐºÐ¾ÑƒÐ¿Ñ‹, Ð½Ð¾ Ð½ÐµÐ»ÑŒÐ·Ñ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð±ÐµÐ· Ð¾Ñ‚Ð·Ñ‹Ð²Ð° Ñ‚Ð¾ÐºÐµÐ½Ð°

Ð’Ñ‹ Ñ‚Ð°Ðº Ð¶Ðµ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑÐ¾Ð¾Ð±Ñ‰Ð¸Ñ‚ÑŒ Slack ÐºÑƒÐ´Ð° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ ÐºÐ¾Ð´. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð° `redirect_uri` ÑÑÑ‹Ð»ÐºÑƒ Ñ ==Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð¾Ð¼ https==.
Ð¢Ð°Ðº Ð¶Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€  `state` - Ð¿ÐµÑ€ÐµÐ´Ð°Ð¹Ñ‚Ðµ ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ, Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐµÐ³Ð¾, ÐºÐ¾Ð³Ð´Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð¾Ñ‚Ð²ÐµÑ‚.

#### ÐžÐ¶Ð¸Ð´Ð°Ð½Ð¸Ðµ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ
â˜•ï¸ ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¶Ð´Ð¸Ñ‚Ðµ )

Ð Ð°ÑÐ¿Ð°Ñ€ÑÐ¸Ñ‚Ðµ Ð¾Ñ‚Ð²ÐµÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¸ÑˆÐµÐ» Ð½Ð° ÑƒÐºÐ°Ð·Ð°Ð½Ð½Ñ‹Ð¹ `redirect_uri`, Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ð½Ð° `oauth.v2.acess`:
```sh
curl -F code=1234 -F client_id=3336676.569200954261 -F client_secret=ABCDEFGH https://slack.com/api/oauth.v2.access
```

ÐŸÐ¾ÑÐ»Ðµ ÑÑ‚Ð¾Ð³Ð¾ Slack Ð¿Ñ€Ð¸ÑˆÐ»ÐµÑ‚ Ð¾Ñ‚Ð²ÐµÑ‚ Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ÑÑ access token Ð¸ Ð´Ñ€ÑƒÐ³Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ. Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°Ð»Ð¸ user scopes, Ð¾Ð½Ð¸ Ð±ÑƒÐ´ÑƒÑ‚ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ Ð·Ð° ÐºÐ»ÑŽÑ‡Ð¾Ð¼ `authed_user`.


![[Pasted image 20230216211903.png]]

>[!tip] Ð Ð¾Ñ‚Ð°Ñ†Ð¸Ñ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²
>Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ñ OAuth flow Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸ÑŽ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ Ð´Ð»Ñ ÑÐ²Ð¾Ð¸Ñ… Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°. Ð‘ÐµÐ· Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² ÑÑ€Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð½Ð¸ÐºÐ¾Ð³Ð´Ð° Ð½Ðµ Ð¸ÑÑ‚ÐµÐºÐ°ÐµÑ‚. ÐŸÑ€Ð¸ Ñ€Ð¾Ñ‚Ð°Ñ†Ð¸Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² ÑÑ€Ð¾Ðº ÐµÐ³Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¸ÑÑ‚ÐµÐºÐ°ÐµÑ‚ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 12 Ñ‡Ð°ÑÐ¾Ð².

## ÐžÑ‚Ð·Ñ‹Ð² Ñ‚Ð¾ÐºÐµÐ½Ð°
ÐžÑ‚Ð·Ñ‹Ð² Ñ‚Ð¾ÐºÐµÐ½Ð° Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ñ‡ÐµÑ€ÐµÐ· `auth.revoke` Ð¼ÐµÑ‚Ð¾Ð´. ÐŸÐ¾ÑÐ»Ðµ Ð¾Ñ‚Ð·Ñ‹Ð²Ð°:
- Bot token Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð±Ð¾Ñ‚Ð° ÑƒÐ´Ð°Ð»ÐµÐ½ Ð¸Ð· workspace
- Slash ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹, ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ðµ Ñ  bot token, Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ Ð¸Ð· workspace, ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾ Ð¶Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½ÐµÑÑƒÑ‚ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´
- Ð’Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ Ð²ÐµÐ±-Ñ…ÑƒÐºÐ¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±Ñ‹Ð»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ Ð¸ ÑÐ²ÑÐ·Ð°Ð½Ñ‹ Ñ bot token, Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹
- Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾ Ð¶Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚, Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¾ Ð¸Ð· workspace

## Refresh token
>[!warning] Ð Ð¾Ñ‚Ð°Ñ†Ð¸ÑŽ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð½ÐµÐ»ÑŒÐ·Ñ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ

Ð”Ð»Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¾ÐºÐµÐ½Ð°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¼ÐµÑ‚Ð¾Ð´ `oauth.v2.exchange` - Ð¾Ð½ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Client Id Ð¸ Client secret. Ð’ Ð¾Ñ‚Ð²ÐµÑ‚Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒÑÑ `access_token`, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑ `xoxe-`, Ñ‚Ð°Ðº Ð¶Ðµ Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð»Ðµ `expires_in` Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‰ÐµÐµ Ñ‡ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¸ÑÑ‚ÐµÑ‡ÐµÑ‚ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð°.

>[!info] ÐšÐ¾Ð³Ð´Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ User token
> - Ð•ÑÐ»Ð¸ Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
> - Ð•ÑÐ»Ð¸ Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ñ‹ ÑÐ¿ÐµÑ†Ð¸Ñ„Ð¸Ñ‡Ð½Ñ‹Ðµ API, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ user token (Slackâ€™s SCIM API, Audit Logs API, Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ admin API)

## ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¿Ñ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ñ‚Ð¾Ñ‡ÐµÑ‡Ð½Ñ‹Ñ… Ð¿Ñ€Ð°Ð²
-   **ðŸ§‘ðŸ»â€ðŸ¤â€ðŸ§‘ðŸ½**Â ÐŸÐ¾Ð²Ñ‹ÑˆÐµÐ½Ð° Ð½Ð°Ð´ÐµÐ¶Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
-   **ðŸ“¶**Â Ð“Ð¸Ð±ÐºÐ¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸ Ñ€Ð°ÑÑ‚ÑƒÑ‰ÐµÐ¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
-   **ðŸ”**Â Ð‘Ð¾Ð»ÑŒÑˆÐµ Ñ‚Ð¾Ñ‡Ð½Ð¾ÑÑ‚Ð¸ Ð¸ Ð¼ÐµÐ½ÑŒÑˆÐµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð², Ð·Ð°Ð±Ð¾Ñ‚ÑÑ‰Ð¸Ñ…ÑÑ Ð¾ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸

## Ð£Ñ€Ð¾Ð²Ð½Ð¸ Ñ‚Ð¾ÐºÐµÐ½Ð°
- Workspace level - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° 1 workspace Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¾Ñ€Ð³Ð°
- Org level - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð¾ workspace Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¾Ñ€Ð³Ð°

### ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸

Ð¢Ð¾ÐºÐµÐ½Ñ‹ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð°ÐºÐ¸Ðµ API, ÐºÐ°Ðº:
- **Slackâ€™s Discovery API** (Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ eDiscovery Ð¸ DLP)(ÐžÐ±Ñ€Ð°Ñ‚Ð¸Ñ‚ÐµÑÑŒ Ð² ÑÐ»ÑƒÐ¶Ð±Ñƒ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Slack, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ ÑÑ‚Ñƒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð² Ð²Ð°Ñˆ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ Slack.)
- **Audit Logs API** (Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸)
- **API, ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ðµ Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼** (ÑÐ»ÑƒÑ‡Ð°Ð¹ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð² Slack)
- **SCIM API** (Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹)

Ð¡ÐºÐ¾ÑƒÐ¿Ñ‹ Ð´Ð»Ñ org-level Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² Ð±ÑƒÐ´ÑƒÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð² user token Ð¸ Ð±ÑƒÐ´ÑƒÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ ÐºÐ¾Ñ€ÐµÐ½ÑŒ Â `admin:*`Â (Ð¸Ð»Ð¸Â `discovery:*`Â Ð¸Ð»Ð¸Â `auditlogs:*`).

==Ð”Ð»Ñ `admin:*` ÑÐºÐ¾ÑƒÐ¿Ð¾Ð² Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ OAuth flow Ð±Ñ‹Ð» Ð¸Ð½Ð¸Ñ†Ð¸Ð¸Ñ€Ð¾Ð²Ð°Ð½ Enterprise Grid admin Ð¸Ð»Ð¸ owner'Ð¾Ð¼, Ð¸ Ð¸Ñ… ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð° Enterprise Grid org, Ð° Ð½Ðµ Ð½Ð° Ð¸Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ workspace, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ workspace switcher Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸==.

## Ð’ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Slack Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²

### ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
Slack Ð¿Ð¾Ð´Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ð¼ ÐºÐ»ÑŽÑ‡Ð¾Ð¼ (secret), ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ. ==Ð’ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ Slack Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ `X-Slack-Signature` header==. Ð¢Ð°ÐºÐ°Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸ÐµÐ¹ signing secret'Ð° Ð¸ Ñ‚ÐµÐ»Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð² Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ¼ Ð·Ð°ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ 256-Ð±Ð¸Ñ‚Ð½Ñ‹Ð¼ ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼.

#### ÐšÐ°Ðº Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð² 4 Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… ÑˆÐ°Ð³Ð°:
- Ð’Ð¾Ð·ÑŒÐ¼Ð¸Ñ‚Ðµ `X-Slack-Request-Timestamp` Ð¸ Ñ‚ÐµÐ»Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°
- ÐšÐ¾Ð½ÐºÐ°Ñ‚Ð¸Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð¸Ð· Ð²ÐµÑ€ÑÐ¸Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°, timestamp'Ð° Ð¸Ð· Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° Ð¸ Ñ‚ÐµÐ»Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð¼ `:`. Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð³Ð»ÑÐ´ÐµÑ‚ÑŒ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ Ñ‚Ð°Ðº:
  ```ruby
v0:123456789:command=/weather&text=94070
```
- Ð¡ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ HMAC SHA256 ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð·Ð°ÑˆÐ¸Ñ„Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Slack `Signing Secret` Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ ÐºÐ»ÑŽÑ‡Ð°
- Ð¡Ñ€Ð°Ð²Ð½Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ñ  `X-Slack-Signature` Ð² Ð·Ð°Ð¿Ñ€Ð¾ÑÐµ

## Mutual TLS

Ð—Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð¾Ñ‚ Slack Ñ‚Ð°Ðº Ð¶Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ñ‡ÐµÑ€ÐµÐ· Mutual TLS. ÐžÑ‚Ð»Ð¸Ñ‡Ð¸Ñ Mutual TLS Ð¾Ñ‚ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð² Ñ‚Ð¾Ð¼ Ð³Ð´Ðµ Ð¸ ÐºÐ°Ðº ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚. Ð’ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð¸Ð¸ Ð¾Ñ‚ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¸ Ð² Ð²Ð°ÑˆÐµÐ¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸, Ð²Ñ‹ Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚Ðµ Ð²Ð°Ñˆ TLS-ÑÐµÑ€Ð²ÐµÑ€, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Slack.

- Ð’Ð°Ñˆ TLS-ÑÐµÑ€Ð²ÐµÑ€ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚
- Ð”Ð¾ÑÑ‚Ð°ÐµÑ‚ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº (1 Ð¸Ð· 2 Ð¿Ð¾ Ð²Ñ‹Ð±Ð¾Ñ€Ñƒ)
- Ð’ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° Ð² header Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° `X-Client-Certificate-SAN`
- Ð’Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚, Ñ‡Ñ‚Ð¾ header - ÑÑ‚Ð¾ `platform-tls-client.slack.com`


## 5 Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Security ÑÐ¾Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ð¹
1. Ð¨Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
   ==Slack Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ HTTPS Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð° Ð¸ Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€ Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¼ TLS 1.2 ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð¼==
2. Client ID Ð¸ Client Secret
   Client ID Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ ÐºÐ¾Ð´Ð¾Ð¼ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½ Ñ‡ÐµÑ€ÐµÐ· email.
   Client Secret Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ´Ð°Ð½ Ð² ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ¸Ð¹ ÐºÐ¾Ð´, Ñ‡ÐµÑ€ÐµÐ· email Ð¸Ð»Ð¸ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒÑÑ Ð² Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÑÑ….
3. ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð¿Ð¾ IP Ð°Ð´Ñ€ÐµÑÐ°Ð¼
   ==Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Single Workspace Ð¸ Web API==
   ÐœÐ¾Ð¶Ð½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿ÑƒÐ» IP Ð°Ð´Ñ€ÐµÑÐ¾Ð² (Ð´Ð¾ 10 ÐµÐ´Ð¸Ð½Ð¸Ñ‡Ð½Ñ‹Ñ… Ð¸Ð»Ð¸ Ð½Ð°Ð±Ð¾Ñ€ Ð² CIDR Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ `101.101.101.106/32.`) Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ð±ÑƒÐ´ÑƒÑ‚ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ñ‹.
   ÐÐ° Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð°Ð´Ñ€ÐµÑÐ° Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚:
   ```json
{
  "ok": false,
  "error": "invalid_auth"
}
```  
4. Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð²
   - ÐŸÐ¾Ð´ÑƒÐ¼Ð°Ð¹Ñ‚Ðµ, Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð»Ð¸ Ð²Ð°Ð¼ Ð½ÑƒÐ¶ÐµÐ½ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ñ‚Ð¾ÐºÐµÐ½, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð»Ð¾. Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚, Ð±ÑƒÐ´ÑŒÑ‚Ðµ Ð¾ÑÑ‚Ð¾Ñ€Ð¾Ð¶Ð½Ñ‹ Ð¸ Ð½Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð±Ð¾Ð»ÑŒÑˆÐµ ÑÐµÐºÑ€ÐµÑ‚Ð¾Ð² ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð², Ñ‡ÐµÐ¼ Ð²Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾.
   - ÐŸÐ¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚Ðµ Ð½Ð°Ð¸Ð¼ÐµÐ½ÑŒÑˆÐµÐµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¿Ñ€Ð¸Ð²Ð¸Ð»ÐµÐ³Ð¸Ð¹ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ‚Ð¾ÐºÐµÐ½Ð°. Ð‘Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ñƒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð²ÑÐµÐ³Ð¾ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ Ñ Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð¼. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚Ðµ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸ Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹ Ð²Ð°ÑˆÐ¸Ñ… ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð²Ð·Ð»Ð¾Ð¼Ð°.
5. Ð’ÑÐµ Ð¿Ñ€Ð¾ URL
   - **URL Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… Ð²ÐµÐ±-Ñ…ÑƒÐºÐ¾Ð²**
     Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð½Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ‚Ð°ÐºÐ¸Ðµ URL Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾. ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ IP Ð½Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‚ Ð½Ð° Ð²ÐµÐ±-Ñ…ÑƒÐºÐ¸.
   - **Redirect URL**
     ÐžÐ¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹ Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð² ÐºÐ¾Ð´Ðµ. ÐžÐ´Ð½Ð°ÐºÐ¾ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ redirect URL-Ð°Ð´Ñ€ÐµÑÐ°, Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ðµ Ð² Ð¾Ð±Ñ‰ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾Ð¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸, Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð¾Ð¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¸Ð¼ÐµÐ½Ð°Ð¼Ð¸, Ð½Ð°Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¼Ð¸ÑÑ Ð¿Ð¾Ð´ Ð²Ð°ÑˆÐ¸Ð¼ Ð½ÐµÐ¿Ð¾ÑÑ€ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÐµÐ¼.

___
> [!tip]+ Key takeaways
> 1. One of the ways we ensure data in Slack is secured for developers and users is through authentication.
> 2. OAuth is a protocol that lets your app request authorization to private details in a user's Slack account without getting their password and is used for installing apps on a workspace or org.
> 3. If you intend to install your app on two or more workspaces, youâ€™ll need to build an OAuth installation flow, which includes three steps: asking for scopes; waiting for a user to approve your requested scopes; and exchanging a temporary code for an access token.
> 4. At the end of the OAuth flow, your app gains an access token, which opens the door to Slack API methods, events and other features.
> 5. During the OAuth flow, you specify which scopes your app needs. Those scopes determine exactly which methods, events and features your app can access.
> 6. The benefits of granular permissions include: more precision and fewer restrictions for security-conscious admins; improved app reliability; and flexibility to add incremental functionality to your app.
> 7. With the help of signing secrets and/or Mutual TLS, your app can more confidently verify whether requests sent from Slack are authentic.
> 8. Build confidence in the sanctity of your user tokens and bot tokens by storing them in a way that directly links them to the token owner (workspace or user).
> 9. Think about the security of your data, including different risks and mitigations, in the context of the layers of the OSI model.

> [!tip]+ **Before moving on, confirm that you can:**
> - Implement the OAuth installation flow.
> - Describe each step in the OAuth flow.
> - Describe how Client IDs and Client Secrets are used in the OAuth flow.
> - Explain the function and importance of app scopes.
> - Define the principle of least privilege.
> - List each token type that can be generated.
> - Explain how to generate tokens of various types and scopes.
> - Explain how to verify that a callback sent to your app has originated from Slack.
> - Identify the steps you could take to make your app communicate securely in Slack.
> - Explain how to restrict token use by IP address.
> - Describe how your application should safely store data.
> - Can identify basic do's and don'ts of the OSI security model.